<!doctype html>
<html ng-app="nmpApp" class="no-js" lang="it" >
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>Nei Miei Panni - Game</title>
    
    <link rel="stylesheet" href="css/app.css" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <script src="bower_components/modernizr/modernizr.js"></script>
  </head>


<body class="step" data-ng-class="playerName.toLowerCase()">
    
    <div class="off-canvas-wrap">
        <div class="inner-wrap">
            
            <!-- aside -->
            <aside id="sidebar" class="sidebar-section player left-off-canvas-menu" role="complementary" data-ng-controller="sidebar">

                <h1 class="player-title">{{ playerName }}</h1>    
                
                <img class="player__img" src="images/avatar/{{ playerName.toLowerCase() }}.png" alt="{{ playerName }}">
                    
                <section class="player-metrics">
                    <div class="player-metrics__step">
                        <section class="ng-binding">
                            <i aria-hidden="true" class="icon-time"></i>
                            [{{ scenes.currentIndex+1 }}/{{ scenes.scenes.length }}]
                        </section>
                    </div>

                    <div class="player-metrics__money">
                        <section class="ng-binding">
                            <i aria-hidden="true" class="icon-euro"></i>
                            &euro; {{ player.money }}
                        </section>
                    </div>

                    <div class="player-metrics__points">
                        <section class="ng-binding">
                            <i aria-hidden="true" class="icon-smile"></i>
                            pt {{ player.happiness }} <!-- indicatore pt -->
                        </section>
                    </div>
                </section>

                <section class="helper-buttons">

                    <div class="helper-money" data-ng-repeat="helper in helpers" data-ng-class="helper.class">
                        <h3 class="helper-buttons__title ng-binding">{{ helper.title }}</h3>
                        
                        <p class="helper-buttons__text ng-binding">{{ helper.text }}</p>
                        
                        <button data-ng-disabled="helper.disabled" data-ng-click="openHelper($index)" id="helper-1-call">
                            <span class="show-for-small-only">DAI</span>
                            <span class="hide-for-small-only ng-binding">{{ helper.title }}</span>
                        </button>
                    </div>
                </section>

                <footer class="unar">
                    <img class="unar__img" alt="UNAR - Ufficio Nazionale Antidiscriminazioni Razziali" src="images/unar.png">
                </footer>


                <!-- helper modal choice -->
                <div id="helper" class="scelta scelta--helper md-modal md-effect-8" data-ng-class="{'md-show': open.helper}">
                    <div class="scelta__inner md-content">
                        <h2 class="scelta__title">{{ choice.title }}</h2>
                        <p class="scelta__text">{{ choice.text }}</p>

                        <section class="scelta__values">
                            <span>
                                <i class="icon-euro" aria-hidden="true"></i> {{ choice.money }}€
                            </span>
                            <span>
                                <i class="icon-smile" aria-hidden="true"></i> {{ choice.happiness }}pt
                            </span>
                        </section>

                        <section class="scelta__buttons">
                            <button class="helper__go" id="go-thru-1" data-ng-click="getHelper()">OK</button>
                            <button class="helper__back back-to-scena" data-ng-click="closeHelper()">Indietro</button>
                        </section>
                        
                        <a class="md-close" data-ng-click="closeHelper()">&#215;</a>
                    </div>
                </div>

                <!-- helper modal conseguence -->
                <div id="helper-conseguence" class="scelta scelta--conseguence md-modal md-effect-8 text-center"  data-ng-class="{'md-show': open.conseguence}">
                    <div class="scelta__inner md-content">
                        <h2 class="scelta__title">{{ conseguence.title }}</h2>
                        <p class="scelta__text">{{ conseguence.text }}</p>

                        <section class="scelta__buttons">
                        <button id="go-thru-1" data-ng-click="closeHelper()">OK</button>
                        </section>
                        <a class="md-close" data-ng-click="closeHelper()">&#215;</a>
                    </div>
                </div>
            </aside>

            <!-- main section-->
            <section id="main" role="main" class="main-section" data-ng-controller="game">
                      
                <!-- nav trigger 4 small --> 
                <nav class="tab-bar show-for-small-only">
                  <section class="left-small">
                    <!-- <i class="icon-freccia" aria-hidden="true"></i> -->
                    <a class="left-off-canvas-toggle menu-icon"><span></span></a>
                  </section>
                    <h1 class="title text-center">{{ playerName }}</h1>
                </nav>


                <!-- INTRODUZIONE block -->
                <article id="introduzione" class="dialog dialog--introduzione" data-scene>
                    <div class="dialog__inner">
                        <h2 class="dialog__title">{{ scene.title }}</h2>
                        <p class="dialog__text">{{ scene.text }}</p>
                        <section id="introduzione-buttons" class="dialog__buttons">
                           <button ng-repeat="choice in scene.choices" data-ng-click="ui.showChoice.call(this)" ng-disabled="!choice.enabled">{{ choice.button }}</button>
                        </section>
                    </div>
                </article>

                <!-- scelta modal -->
                <div id="scelta" class="scelta md-modal md-effect-1" data-choice>
                        <div class="scelta__inner md-content">
                            <h2 class="scelta__title">{{ choice.title }}</h2>
                            <p class="scelta__text">{{ choice.text }}</p>

                            <section class="scelta__values">
                                <span>
                                    <i class="icon-euro" aria-hidden="true"></i> {{ choice.money }}€
                                </span>
                                <span>
                                    <i class="icon-smile" aria-hidden="true"></i> {{ choice.happiness }}pt
                                </span>
                            </section>

                            <section id="scelta-buttons" class="scelta__buttons">
                                <button id="go-thru-1" data-ng-click="getConseguence()">OK</button>
                                <button class="back-to-scena" data-ng-click="ui.closeChoice()">Indietro</button>
                            </section>

                            <a class="md-close" data-ng-click="ui.closeChoice()">&#215;</a>
                        </div>
                </div>

                <!-- CONSEGUENZA block -->
                <article id="conseguenza" class="dialog dialog--conseguenza" data-conseguence data-ng-class="conseguence.class"><!-- aggiungere classi good/mid/bad a seconda del random-->
                    <div class="dialog__inner">
                        <h2 class="dialog__title">{{ conseguence.title }}</h2>
                        <p class="dialog__text">{{ conseguence.text }}</p>

                        <section class="dialog__buttons">
                            <button data-ng-click="ui.showReport()">OK</button>
                        </section>
                    </div>
                </article>

                <!-- VARIAZIONE block TO BE REDESIGNED -->
                <article id="variazione" class="dialog dialog--variazione" data-variazione>
                    <div class="dialog__inner dialog--variazione__inner">
                        <h2 class="variazione__title">...e ora?</h2>
                        <div class="variazione__block">
                            <section id="e-variazione">
                            <i aria-hidden="true" class="icon-euro"></i>

                            <span id="e-fattore" class="variation-el fattore">{{ variazione.money.delta }}</span>
                            <span id="e-before" class="variation-el before">€ {{ variazione.money.prima }}</span> 
                            <span id="e-after" class="variation-el after">€ {{ variazione.money.attuale }}</span> 
                            </section>
                        </div>
                        <div class="variazione__block">
                            <section id="pt-variazione">
                                <i aria-hidden="true" class="icon-smile"></i>
                                <span id="pt-fattore" class="variation-el variation-pt fattore">{{ variazione.happiness.delta }}</span>
                                <span id="pt-before" class="variation-el variation-pt before">pt {{ variazione.happiness.prima }}</span> 
                                <span id="pt-after" class="variation-el variation-pt after">pt {{ variazione.happiness.attuale }}</span> 
                            </section>
                        </div>
                    </div>
                </article> 

                <!-- STATISTICHE block -->
                <article id="stats" class="dialog dialog--stats" data-report>
                    <div class="dialog__inner">
                        
                        <h5 class="dialog__title dialog--stats__title">{{ scene.report.text }}</h5>

                        <h6 class="dialog--stats__src">{{ scene.report.source }}</h6>

                        <section class="dialog__buttons">
                            <button data-ng-click="ui.next()">OK</button>
                        </section>
                    </div>
                </article>   

                <!-- RISK message block -->
                <article id="risk" class="dialog dialog--risk" data-risk>
                    <div class="dialog__inner">
                        <h2 class="dialog__title">Rischio!</h2>

                        <p class="dialog__text">{{ conseguence.waitingText }}</p>

                        <div class="roulette" data-ng-class="conseguence.class"></div><!-- aggiungere classi good/mid/bad a seconda del random-->
                    </div>
                </article>  

        </section> <!-- end #main -->
        

        </div>
    </div>
    
    <!-- overlay for modals -->
    <div class="md-overlay"></div>

    <script src="bower_components/jquery/jquery.js"></script>
    <script src="bower_components/foundation/js/foundation.min.js"></script>
    <script src="js/app.js"></script>

    <script src="bower_components/angular/angular.min.js"></script>
    <script src="js/appConfig.js"></script>
    <script src="js/appServices.js"></script>
    <script src="js/appControllers.js"></script>
    <script src="js/appDirectives.js"></script>
    <script src="js/appFilters.js"></script>
</body>
</html>
