
<!--[if IE 8]><html class="no-js lt-ie9" lang="it" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js full" lang="it" > <!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
  <title>Scegli il tuo personaggio | Nei Miei Panni</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />


  <link rel="stylesheet" href="css/app.css">  
  <script src="bower_components/modernizr/modernizr.js"></script> 
</head>

<body class="full">

    <div id="start" class="start">
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>    
    <div class="square"></div>

        <div class="message">
            <header class="message__header">
                <h2 class="message__title">Sono <div class="word__container">
                        <span class="word">straniero.</span>
                        <span class="word">musulmana.</span>
                        <span class="word">africano.</span>
                        <span class="word">extracomunitaria.</span>
                        <span class="word">figlio di cinesi.</span>
                        <span class="word">Benjamin.</span>
                        <span class="word">Fatima.</span>
                        <span class="word">Irina.</span>
                        <span class="word">Zhang.</span>
                    </div>
                </h2>
            </header>
            <button id="go-to-select" class="message__button">gioca nei miei panni</button>
        </div>
    </div>    


<div class="container"> 
        <div id="bl-main" class="bl-main">
                
            <section class="benjamin">
                <div class="bl-box">
                    <img class="bl-box-img" src="images/avatar/benjamin.png" alt="benjamin">
                </div>

                <div class="bl-content">
                    <h2 class="m-name">Benjamin</h2>
                    <p>Ho 25 anni e vengo dalla Nigeria. Sono arrivato in Italia per lavorare in una piccola impresa che purtroppo ha chiuso.</p>

                    <p>Io e i miei colleghi siamo rimasti senza lavoro, ma rispetto a loro ho un problema in più: senza un'assunzione in regola non potrò rinnovare il permesso di soggiorno e diventerò un clandestino.</p>

                    <p>Così sono venuto in una grande città, sperando di trovare un lavoro che mi permetta di mettermi in regola. Vuoi provare a vivere nei miei panni?</p> 

                    <div class="bl-action">
                        <a href="game.html#/benjamin" class="button bl-button">gioca con benjamin</a> oppure <a class="bl-close bl-back"href="#">torna alle scelte</a>
                    </div>
                
                </div>
                <span class="bl-icon bl-icon-close bl-close"></span>
                <span class="md-close"></span>
            </section>

            <section class="fatima">
                <div class="bl-box ">
                    <img class="bl-box-img" src="images/avatar/fatima.png" alt="Fatima">
                </div>

                <div class="bl-content">
                    <h2 class="m-name">Fatima</h2>
                    <p>Ho 38 anni e sono nata e cresciuta in Marocco. Mio marito ha trovato un lavoro in Italia e io mi sono trasferita qui, dove abbiamo avuto due figli che adesso vanno a scuola.</p>

                    <p>Faccio la mamma, la casalinga e cerco di far quadrare i conti, anche se è difficile. Il mio sogno è dare un futuro migliore ai miei figli, ma anche crescerli nel rispetto della nostra religione e del nostro paese d'origine. Vuoi provare a vivere nei miei panni?</p>

                    <div class="bl-action">
                        <a href="game.html#/fatima" class="button bl-button">gioca con Fatima</a> oppure <a class="bl-back bl-close" href="#">torna alle scelte</a>
                    </div>

                </div>
                <span class="bl-icon bl-icon-close bl-close"></span>
            </section>

            <section class="irina">
                <div class="bl-box">
                    <img class="bl-box-img" src="images/avatar/irina.png" alt="Irina">
                </div>
                <div class="bl-content">
                    <h2 class="m-name">Irina</h2>
                    <p>Sono nata 28 anni fa in Romania. Ho sempre vissuto in un piccolo centro e la mia famiglia non è mai stata ricca, anzi.</p> 

                    <p>Ho sempre lavorato e studiato insieme, e sono riuscita a prendere un diploma da infermiera professionale con il massimo dei voti.</p> 

                    <p>Sono venuta in Italia per trovare un lavoro e aiutare la mia famiglia rimasta in Romania. Vuoi provare a vivere nei miei panni?</p>

                    <div class="bl-action">
                        <a href="game.html#/irina" class="button bl-button">gioca con Irina</a> oppure <a class="bl-back bl-close" href="#">torna alle scelte</a>
                    </div>

                </div>
                <span class="bl-icon bl-close bl-icon-close"></span>
            </section>
    
            <section class="zhang">

                <div class="bl-box">
                    <img class="bl-box-img" src="images/avatar/zhang.png" alt="Zhang">
                </div>
                <div class="bl-content">
                    <h2 class="m-name">Zhang</h2>
                    <p>Ho 19 anni, sono nato in Italia, sono italiano e parlo italiano. I miei genitori sono arrivati dalla Cina 30 anni fa e gestiscono un negozio.</p>

                    <p>Loro vorrebbero che io imparassi il cinese e che andassi a lavorare con loro, ma io voglio continuare a studiare.</p>

                    <p>Per questo mi sono trasferito in una città più grande e mi sono iscritto all'università, anche se loro non sono d'accordo. Ora dovrò cavarmela da solo. Vuoi provare a vivere nei miei panni?</p>
                    <div class="bl-action">
                        <a href="game.html#/zhang" class="button bl-button">gioca con Zhang</a> oppure <a class="bl-back bl-close" href="#">torna alle scelte</a>
                    </div>
        
                </div>
                <span class="bl-icon bl-close bl-icon-close"></span>
            </section>

        </div>
</div><!-- /container -->
        



<script src="bower_components/jquery/jquery.js"></script>
<script src="js/vendor/boxlayout.js"></script>
<script src="bower_components/greensock/src/minified/TweenMax.min.js"></script>   

<script>

    // Running in node-webkit
    if(process !== undefined) {
        // Load native UI library
        var ngui = require('nw.gui');

        // Get the current window
        var nwin = ngui.Window.get();

        $(document).ready(function () {
            nwin.show();
            nwin.maximize();
        });
    }

    $(function() {
        Boxlayout.init();
    });

    $(document).ready(function() {
        $('body').addClass('ready');
    });

    // Tweens
    var cover = $("#start"),
        square = $(".square"),
        btn = $("#go-to-select");

    //animate squares


    function setSquares() {
        for (i = 0; i < square.length; i++) {
            var newq = makeNewPosition();
                el = $(square[i]);
                el.css('top', newq[0]);
                el.css('left', newq[1]);
                transform = 'rotateX('+newq[4] +'deg) rotateY('+newq[3]+') scale('+newq[2]+')';
               // el.css('transform', transform);
        } 
    }

    setSquares();
    animateDiv();    


    function animateDiv() {
        for (i = 0; i < square.length; i++) {
            elem = $(square[i]);
            tween(elem);
        }
    };


     function tween($el) {
        var newq = makeNewPosition();

        TweenMax.to($el, newq[5], {top:newq[0], 
                            left:newq[1],  
                            rotationY:newq[4],
                            rotationX:newq[3],
                            scale:newq[2],
                            onComplete:animateDiv,
                            ease: Ease.easeInQuad
                        }); 
    };


   function makeNewPosition(){
        
        // Get viewport dimensions (remove the dimension of the div)
        var h = $(window).height() - 30;
        var w = $(window).width() - 30;
        var min = -360;
        var max = 360;
        var smax = 20;
        var smin = 2;

        // and the formula is:
        var nrx = Math.floor(Math.random() * (max - min + 1)) + min;
        var nry = Math.floor(Math.random() * (max - min + 1)) + min;
        
        var nh = Math.floor(Math.random() * h);
        var nw = Math.floor(Math.random() * w);
        var ns = Math.random();
        var nsp = Math.floor(Math.random() * (smax - smin + 1)) + smin;
        return [nh,nw,ns,nrx,nry,nsp];            
    };

  



   // animate words
   $(function(){
            
            var $words = $(".word");

            //settings
            var transitionTime = 0.4;
            var wordsDelayTime = 1.5;
            
            //internal
            var totalWords = $words.length;
            
            var oldWord = 0;
            var currentWord = -1;
            
            //initialize    
            switchWords();
            
            function switchWords(){
                
                oldWord = currentWord;
                
                if(currentWord < totalWords-1){
                    currentWord ++
                } else {
                    currentWord = 0;
                }
                
                TweenLite.to($words.eq(oldWord), transitionTime, {top:-20, alpha:0, rotationX: 90});
                TweenLite.fromTo($words.eq(currentWord), transitionTime, {top:20, alpha:0, rotationX: -90 }, {top:0, alpha:1, rotationX:0});
                
                TweenLite.delayedCall(wordsDelayTime, switchWords);
            }       
    });


    // go to select
    btn.on("click", function(){
        TweenLite.to(cover, 1, {top:"-100%", ease:Back.easeInOut});
        $('html').addClass('show-select');
    });    


</script>

</body>
</html>